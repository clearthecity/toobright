(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3acc"],{"02d8":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"safe-to-drive"}},[e.isSafe?n("div",[n("p",[e._v("youâ€™ll be ok for another "),n("span",[e._v(e._s(e.waitUntil))])])]):n("div",[n("p",[e._v(e._s(e.directionWarning))]),n("p",[e._v("or maybe wait about "+e._s(e.waitUntil))])]),n("br"),n("br"),n("p",[n("router-link",{staticClass:"link",attrs:{to:"/about"}},[e._v("about")])],1)])},s=[];const r=9,a=3;var u={name:"SafeToDrive",props:{sunAltitude:Number,sunAzimuth:Number,userLatitude:Number,userLongitude:Number},data(){return{isSafe:!0,waitUntil:""}},mounted:function(){this.sunAltitude>=a&&this.sunAltitude<=r&&(this.isSafe=!1),this.startTimeCalculations()},computed:{directionWarning:function(){return this.sunAzimuth>=45&&this.sunAzimuth<=135?"be careful driving west":"be careful driving east"}},methods:{startTimeCalculations:function(){var e=this.$moment;let t=e();var n=this.$suncalc;n.addTime(r,"morningDangerEnd","eveningDangerBegin"),n.addTime(a,"morningDangerBegin","eveningDangerEnd");let i=n.getTimes(t,this.userLatitude,this.userLongitude),s=this;if(this.isSafe){let t=e().add(1,"d"),r=n.getTimes(t,this.userLatitude,this.userLongitude);this.getTimeToDanger(i,r).then(function(e){return e},function(e){console.log(e)}).then(function(e){s.writeWaitMessage(e)})}else this.getTimeToSafety(i).then(function(e){return e},function(e){console.log(e)}).then(function(e){s.writeWaitMessage(e)})},getTimeToSafety:function(e){return new Promise((t,n)=>{var i=this.$moment;i||n(Error("getTimeToSafety: cannot access moment")),this.sunAltitude<=a?t(e.morningDangerEnd):t(e.eveningDangerEnd)})},getTimeToDanger:function(e,t){return new Promise((n,i)=>{var s=this.$moment;s||i(Error("getTimeToDanger: cannot access moment")),this.sunAltitude<=a?n(t.morningDangerBegin):n(e.eveningDangerBegin)})},writeWaitMessage:function(e){var t=this.$moment;let n=t(e).diff(t(),"minutes");n>119?n=t(e).diff(t(),"hours")+" hours":n+=" minutes",this.waitUntil=n}}},o=u,m=n("2877"),g=Object(m["a"])(o,i,s,!1,null,"0ef5f692",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0a3acc.70caca9b.js.map