{"version":3,"sources":["webpack:///./src/components/SafeToDrive.vue?1e35","webpack:///src/components/SafeToDrive.vue","webpack:///./src/components/SafeToDrive.vue?ea0f","webpack:///./src/components/SafeToDrive.vue","webpack:///./src/components/SafeToDrive.vue?d6ed"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","_s","waitUntil","directionWarning","staticClass","to","staticRenderFns","HIGH_DANGER","LOW_DANGER","SafeToDrivevue_type_script_lang_js_","name","props","sunAltitude","Number","sunAzimuth","userLatitude","userLongitude","[object Object]","isSafe","mounted","startTimeCalculations","computed","methods","moment","$moment","now","SunCalc","$suncalc","addTime","sunTimesToday","getTimes","vm","tomorrow","add","sunTimesTomorrow","getTimeToDanger","then","timeUntil","error","console","log","writeWaitMessage","getTimeToSafety","Promise","resolve","reject","Error","sixAM","hour","noon","isBetween","morningDangerEnd","eveningDangerEnd","fourPM","beforeMidnight","minute","midnight","morningDangerBegin","eveningDangerBegin","difference","diff","components_SafeToDrivevue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SafeToDrive_vue_vue_type_style_index_0_id_6495d3e4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SafeToDrive_vue_vue_type_style_index_0_id_6495d3e4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,MAAA,CAAOC,GAAA,kBAAsB,CAAAP,EAAA,OAAAI,EAAA,OAAAA,EAAA,KAAAJ,EAAAQ,GAAA,6BAAAJ,EAAA,QAAAJ,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAU,kBAAAN,EAAA,OAAAA,EAAA,KAAAJ,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAW,qBAAAP,EAAA,KAAAJ,EAAAQ,GAAA,uBAAAR,EAAAS,GAAAT,EAAAU,gBAAAN,EAAA,MAAAA,EAAA,MAAAA,EAAA,KAAAA,EAAA,eAA0RQ,YAAA,OAAAN,MAAA,CAA0BO,GAAA,WAAe,CAAAb,EAAAQ,GAAA,kBAC1cM,EAAA,GC2CA,MAAAC,EAAA,EACAC,EAAA,EAEA,IAAAC,EAAA,CACAC,KAAA,cACAC,MAAA,CACAC,YAAAC,OACAC,WAAAD,OACAE,aAAAF,OACAG,cAAAH,QAEAI,OACA,OACAC,QAAA,EACAhB,UAAA,KAGAiB,QAAA,WACA1B,KAAAmB,aAAAJ,GAAAf,KAAAmB,aAAAL,IACAd,KAAAyB,QAAA,GAEAzB,KAAA2B,yBAEAC,SAAA,CACAlB,iBAAA,WACA,OAAAV,KAAAqB,YAAA,IAAArB,KAAAqB,YAAA,IACA,0BAEA,4BAGAQ,QAAA,CACAF,sBAAA,WACA,MAAAG,EAAA9B,KAAA+B,QACA,IAAAC,EAAAF,IAEA,MAAAG,EAAAjC,KAAAkC,SACAD,EAAAE,QAAArB,EAAA,yCACAmB,EAAAE,QAAApB,EAAA,yCACA,IAAAqB,EAAAH,EAAAI,SAAAL,EAAAhC,KAAAsB,aAAAtB,KAAAuB,eAEAe,EAAAtC,KAEA,GAAAA,KAAAyB,OAAA,CACA,IAAAc,EAAAT,IAAAU,IAAA,OACAC,EAAAR,EAAAI,SAAAE,EAAAvC,KAAAsB,aAAAtB,KAAAuB,eACAvB,KAAA0C,gBAAAV,EAAAI,EAAAK,GACAE,KAAA,SAAAC,GACA,OAAAA,GACA,SAAAC,GACAC,QAAAC,IAAAF,KAEAF,KAAA,SAAAC,GACAN,EAAAU,iBAAAJ,UAIA5C,KAAAiD,gBAAAjB,EAAAI,GACAO,KAAA,SAAAC,GACA,OAAAA,GACA,SAAAC,GACAC,QAAAC,IAAAF,KAEAF,KAAA,SAAAC,GACAN,EAAAU,iBAAAJ,MAKAK,gBAAA,SAAAjB,EAAAI,GACA,WAAAc,QAAA,CAAAC,EAAAC,KACA,MAAAtB,EAAA9B,KAAA+B,QACAD,GACAsB,EAAAC,MAAA,0CAGA,IAAAC,EAAAxB,IAAAyB,KAAA,GACAC,EAAA1B,IAAAyB,KAAA,IACAvB,EAAAyB,UAAAH,EAAAE,GACAL,EAAAf,EAAAsB,kBAIAP,EAAAf,EAAAuB,qBAKAjB,gBAAA,SAAAV,EAAAI,EAAAK,GACA,WAAAS,QAAA,CAAAC,EAAAC,KACA,MAAAtB,EAAA9B,KAAA+B,QACAD,GACAsB,EAAAC,MAAA,0CAGA,IAAAO,EAAA9B,IAAAyB,KAAA,IACAM,EAAA/B,IAAAyB,KAAA,IAAAO,OAAA,IACAC,EAAAjC,IAAAyB,KAAA,GACAD,EAAAxB,IAAAyB,KAAA,GAGAvB,EAAAyB,UAAAG,EAAAC,IAAA7B,EAAAyB,UAAAM,EAAAT,GACAH,EAAAV,EAAAuB,oBAIAb,EAAAf,EAAA6B,uBAKAjB,iBAAA,SAAAJ,GACA,MAAAd,EAAA9B,KAAA+B,QACA,IAAAmC,EAAApC,EAAAc,GAAAuB,KAAArC,IAAA,WACAoC,EAAA,GACAA,EAAApC,EAAAc,GAAAuB,KAAArC,IAAA,kBAGAoC,GAAA,WAEAlE,KAAAS,UAAAyD,KCpKqVE,EAAA,0BCQrVC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAtE,EACAe,GACF,EACA,KACA,WACA,MAIe2D,EAAA,WAAAH,6CCnBf,IAAAI,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAueE,EAAG","file":"js/chunk-00d4e818.35e61cce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"safe-to-drive\"}},[(_vm.isSafe)?_c('div',[_c('p',[_vm._v(\"youâ€™ll be ok for another \"),_c('span',[_vm._v(_vm._s(_vm.waitUntil))])])]):_c('div',[_c('p',[_vm._v(_vm._s(_vm.directionWarning))]),_c('p',[_vm._v(\"or maybe wait about \"+_vm._s(_vm.waitUntil))])]),_c('br'),_c('br'),_c('p',[_c('router-link',{staticClass:\"link\",attrs:{\"to\":\"/about\"}},[_vm._v(\"about\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id='safe-to-drive'>\n\n    <div v-if='isSafe'>\n      <p>you&rsquo;ll be ok for another <span>{{ waitUntil }}</span> </p>\n    </div>\n\n    <div v-else>\n      <p>{{ directionWarning }}</p>\n      <p>or maybe wait about {{ waitUntil }}</p>\n    </div>\n\n    <br /><br />\n    <p><router-link to=\"/about\" class='link'>about</router-link></p>\n  </div>\n</template>\n\n<style scoped>\n\n.link:hover {\n  text-decoration-style: dotted;\n}\n\n</style>\n\n<script>\n\n/*\n    altitude: sun altitude above the horizon in radians, e.g. 0 at the horizon and PI/2 at the zenith (straight over your head)\n\n    azimuth: horizontal angle in radians (direction along the horizon, measured from south to west), e.g. 0 is south and Math.PI * 3/4 (135deg) is northwest\n    Due west = 90deg\n    Due east = 270deg\n    Note that some algorithms are opposite (i.e., 0 is north, 270 is west)\n\n    Radians to degrees = radian_val * 180 / Math.PI;\n\n    http://astronomy.beamappzone.com/ : animated demo\n\n    To add custom time to SunCalc.getTimes results:\n    SunCalc.addTime(angleInDegrees, morningName, eveningName)\n\n*/\n\nconst HIGH_DANGER = 9\nconst LOW_DANGER = 4\n\nexport default {\n  name: 'SafeToDrive',\n  props: {\n    sunAltitude: Number,\n    sunAzimuth: Number,\n    userLatitude: Number,\n    userLongitude: Number\n  },\n  data () {\n    return {\n      isSafe: true,\n      waitUntil: ''\n    }\n  },\n  mounted: function () {\n    if (this.sunAltitude >= LOW_DANGER && this.sunAltitude <= HIGH_DANGER) {\n      this.isSafe = false\n    }\n    this.startTimeCalculations()\n  },\n  computed: {\n    directionWarning: function () {\n      if (this.sunAzimuth >= 45 && this.sunAzimuth <= 135) {\n        return 'be careful driving west'\n      }\n      return 'be careful driving east'\n    }\n  },\n  methods: {\n    startTimeCalculations: function () {\n      const moment = this.$moment\n      let now = moment()\n\n      const SunCalc = this.$suncalc\n      SunCalc.addTime(HIGH_DANGER, 'morningDangerEnd', 'eveningDangerBegin')\n      SunCalc.addTime(LOW_DANGER, 'morningDangerBegin', 'eveningDangerEnd')\n      let sunTimesToday = SunCalc.getTimes(now, this.userLatitude, this.userLongitude)\n\n      let vm = this\n\n      if (this.isSafe) {\n        let tomorrow = moment().add(1, 'd')\n        let sunTimesTomorrow = SunCalc.getTimes(tomorrow, this.userLatitude, this.userLongitude)\n        this.getTimeToDanger(now, sunTimesToday, sunTimesTomorrow)\n          .then(function (timeUntil) {\n            return timeUntil\n          }, function (error) {\n            console.log(error)\n          })\n          .then(function (timeUntil) {\n            vm.writeWaitMessage(timeUntil)\n          })\n      }\n      else {\n        this.getTimeToSafety(now, sunTimesToday)\n          .then(function (timeUntil) {\n            return timeUntil\n          }, function (error) {\n            console.log(error)\n          })\n          .then(function (timeUntil) {\n            vm.writeWaitMessage(timeUntil)\n          })\n      }\n    },\n\n    getTimeToSafety: function (now, sunTimesToday) {\n      return new Promise((resolve, reject) => {\n        const moment = this.$moment\n        if (!moment) {\n          reject(Error('getTimeToSafety: cannot access moment'))\n        }\n        // if morning\n        let sixAM = moment().hour(6)\n        let noon = moment().hour(12)\n        if (now.isBetween(sixAM, noon)) {\n          resolve(sunTimesToday.morningDangerEnd)\n        }\n        // if evening\n        else {\n          resolve(sunTimesToday.eveningDangerEnd)\n        }\n      })\n    },\n\n    getTimeToDanger: function (now, sunTimesToday, sunTimesTomorrow) {\n      return new Promise((resolve, reject) => {\n        const moment = this.$moment\n        if (!moment) {\n          reject(Error('getTimeToDanger: cannot access moment'))\n        }\n\n        let fourPM = moment().hour(16)\n        let beforeMidnight = moment().hour(23).minute(59)\n        let midnight = moment().hour(0)\n        let sixAM = moment().hour(6)\n\n        // if evening: time to sunrise tomorrow\n        if (now.isBetween(fourPM, beforeMidnight) || now.isBetween(midnight, sixAM)) {\n          resolve(sunTimesTomorrow.morningDangerBegin)\n        }\n        // if day: time to golden hour tonight\n        else {\n          resolve(sunTimesToday.eveningDangerBegin)\n        }\n      })\n    },\n\n    writeWaitMessage: function (timeUntil) {\n      const moment = this.$moment\n      let difference = moment(timeUntil).diff(moment(), 'minutes')\n      if (difference > 90) {\n        difference = moment(timeUntil).diff(moment(), 'hours') + ' hours'\n      }\n      else {\n        difference += ' minutes'\n      }\n      this.waitUntil = difference\n    }\n  }\n}\n\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SafeToDrive.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SafeToDrive.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SafeToDrive.vue?vue&type=template&id=6495d3e4&scoped=true&\"\nimport script from \"./SafeToDrive.vue?vue&type=script&lang=js&\"\nexport * from \"./SafeToDrive.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SafeToDrive.vue?vue&type=style&index=0&id=6495d3e4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6495d3e4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SafeToDrive.vue?vue&type=style&index=0&id=6495d3e4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SafeToDrive.vue?vue&type=style&index=0&id=6495d3e4&scoped=true&lang=css&\""],"sourceRoot":""}